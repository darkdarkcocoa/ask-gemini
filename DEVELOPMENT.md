# 개발 로그

이 파일은 프로젝트의 주요 개발 과정과 의사결정을 기록합니다.

## 2025-06-23: 선택 텍스트 번역 기능 추가

### 구현된 기능
- **Ctrl+C+C 단축키**: 텍스트 선택 후 빠르게 두 번 누르면 번역
- **스마트 분기 처리**: 
  - 입력 필드(input/textarea): 텍스트 직접 교체
  - 일반 텍스트: 툴팁으로 번역 결과 표시
- **설정 통합**: 확장 프로그램 설정의 번역 언어 사용
- **체크박스 옵션**: 선택 번역 기능 활성화/비활성화

### 주요 파일 변경사항
- `content.js`: 키보드 이벤트 리스너, 텍스트 교체 로직, 툴팁 UI
- `background.js`: 선택 텍스트 번역 API 핸들러, 개선된 프롬프트
- `popup/popup.html`: 선택 번역 토글 체크박스 추가
- `popup/popup.js`: 설정 저장/로드 로직 확장
- `popup/popup.css`: 체크박스 스타일링
- `README.md`: 새 기능 문서화

### 기술적 도전과 해결책
1. **번역 품질 문제**: 초기 프롬프트가 원문을 그대로 반환
   - 해결: 강화된 프롬프트 with explicit instructions
2. **Extension context invalidated 오류**: 확장 프로그램 업데이트 후 발생
   - 해결: 포괄적인 오류 처리 및 사용자 안내 메시지
3. **입력 필드 감지**: 다양한 입력 요소 타입 처리
   - 해결: tagName 확인 및 contentEditable 지원

### 브랜치 전략
- `feature/quick-selection-translate` 브랜치에서 개발
- main 브랜치로 merge 후 feature 브랜치 삭제
- GitKraken 사용하여 SSH 인증 설정

### 향후 개선 아이디어
- [ ] 번역 히스토리 기능
- [ ] 더 많은 언어 지원
- [ ] 커스텀 단축키 설정
- [ ] 번역 결과 캐싱
- [ ] 오프라인 번역 지원

### 개발 환경 설정
- SSH 키 생성 및 GitHub 연동
- GitKraken SSH 설정
- Chrome Extension 개발 모드 활용

## 2025-06-30: Ctrl+C+C 기능 개선 및 성능 최적화

### 구현된 기능
- **Google 홈페이지 호환성 문제 해결**
  - 이벤트 캡처 단계에서 키보드 이벤트 감지
  - iframe 내부 콘텐츠 지원 (all_frames: true)
  - 중복 번역 실행 방지 플래그 추가

- **성능 최적화**
  - 번역 청크 크기 최적화
  - 디버깅 로그 정리 (프로덕션 성능 향상)
  - 코드 포맷팅 일관성 개선

- **국제화 지원 확장**
  - 더 정확한 언어별 번역 프롬프트
  - 컨텍스트 인식 번역 개선

- **확장 프로그램 활성화/비활성화 토글**
  - 팝업에 ON/OFF 스위치 추가
  - 전역 번역 기능 일시정지 가능
  - 설정 상태 시각적 피드백

### 주요 파일 변경사항
- `content.js`: 이벤트 캡처 방식 변경, 중복 방지 로직
- `manifest.json`: all_frames 옵션 추가
- `popup/`: 토글 스위치 UI 구현
- 전체 파일: 일관된 라인 엔딩 (LF) 적용

### 기술적 도전과 해결책
1. **Google 홈페이지에서 Ctrl+C+C 미작동**
   - 원인: Google의 특수한 이벤트 처리 방식
   - 해결: addEventListener의 capture 옵션 활용

2. **iframe 내부 텍스트 번역 불가**
   - 원인: content script가 메인 프레임에서만 실행
   - 해결: manifest.json에 all_frames: true 추가

3. **중복 번역 실행 문제**
   - 원인: 이벤트 버블링으로 인한 다중 실행
   - 해결: 초기화 플래그로 단일 실행 보장

### 성능 개선 내역
- 불필요한 console.log 제거로 렌더링 성능 향상
- 번역 요청 배치 처리 최적화
- DOM 업데이트 최소화

## 2025-07-01: 프로젝트 정리 및 보안 개선

### 구현된 기능
- **CLAUDE.md 파일 관리**
  - .gitignore에 추가하여 공개 저장소 제외
  - Claude Code 전용 지침 로컬 유지

### 보안 및 유지보수
- 프로젝트별 설정 파일 분리
- 민감한 개발 정보 보호